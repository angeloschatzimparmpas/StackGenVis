"use strict";
var exceptions_1 = require("../exceptions");
var parser_pegjs = require("./parser_pegjs");
function stripComments(content) {
    content = content.replace(/\/\/[^\n]*\n/g, "\n");
    content = content.replace(/\/\/[^\n]*$/g, "");
    return content;
}
function parseFile(content) {
    content = stripComments(content);
    var result = null;
    try {
        result = parser_pegjs.parse(content, { startRule: "FileEntry" });
    }
    catch (e) {
        if (e.location) {
            throw new exceptions_1.ParseError(e.message, e.location.start, e.location.end);
        }
        else {
            throw new exceptions_1.ParseError(e.message);
        }
    }
    return result;
}
exports.parseFile = parseFile;
function parseExpression(content) {
    var result = null;
    try {
        result = parser_pegjs.parse(content, { startRule: "ExpressionEntry" });
    }
    catch (e) {
        if (e.location) {
            throw new exceptions_1.ParseError(e.message, e.location.start, e.location.end);
        }
        else {
            throw new exceptions_1.ParseError(e.message);
        }
    }
    return result;
}
exports.parseExpression = parseExpression;
//# sourceMappingURL=parser.js.map