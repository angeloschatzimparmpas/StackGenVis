"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var common_1 = require("../common");
var parser_1 = require("../compiler/parser");
var modules = new common_1.Dictionary();
function importPrimitiveCode(name, code) {
    var thisModule = null;
    if (modules.has(name)) {
        thisModule = modules.get(name);
    }
    else {
        thisModule = new common_1.Dictionary();
        modules.set(name, thisModule);
    }
    var tree = parser_1.parseFile(code);
    for (var _i = 0, _a = tree.blocks; _i < _a.length; _i++) {
        var f = _a[_i];
        if (f.type == "function") {
            var fn = f;
            thisModule.set(fn.name, fn);
        }
    }
}
var P2D = require("./primitives2d");
importPrimitiveCode("P2D", P2D.primitives);
var P3D = require("./primitives3d");
importPrimitiveCode("P3D", P3D.primitives);
function getModule(name) {
    return modules.get(name);
}
exports.getModule = getModule;
function getModuleFunction(name, functionName) {
    return modules.get(name).get(functionName);
}
exports.getModuleFunction = getModuleFunction;
function forEachModuleFunction(name, callback) {
    return modules.get(name).forEach(callback);
}
exports.forEachModuleFunction = forEachModuleFunction;
//# sourceMappingURL=index.js.map